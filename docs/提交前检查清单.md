# AutoSnippet 提交新版本前检查清单

发布前在项目根（AutoSnippet 目录）执行以下检查。

## 1. 代码与构建

- [ ] **单元测试**：`npm run test:unit` 全部通过
- [ ] **Dashboard 构建**：`npm run build:dashboard` 无报错（可选，`asd ui -b` 也会触发）
- [ ] **校验脚本**（可选）：若想自测完整性校验流程，可执行 `npm run generate-checksums && npm run verify-checksums`；提交/发布不必执行，`npm publish` 时 prepublishOnly 会自动生成 checksums

## 2. 版本与发布物

- [ ] **package.json**：`version` 已改为目标版本号（如 1.5.7）
- [ ] **CHANGELOG.md**：已添加对应版本条目，包含新增/修复/变更说明
- [ ] **.gitignore**：`checksums.json`、`bin/asd-verify` 保持忽略（不提交，由 prepublishOnly / postinstall 生成）

## 3. 配置与文档

- [ ] **.env.example**：新增环境变量已补充说明（如 `ASD_RECIPE_SAVE_RATE_LIMIT`、`ASD_RECIPE_SAVE_RATE_WINDOW_SECONDS`）
- [ ] **docs/**：权限、限流、完整性校验等若有变更，文档已同步

## 4. Git 与发布

- [ ] **未提交敏感信息**：`.env`、`*.key.js`、`test-key.js` 等未纳入提交
- [ ] **提交信息**：建议包含版本号，如 `chore: release v1.5.7`
- [ ] **发布**：`npm publish` 前会执行 `prepublishOnly` 生成 `checksums.json` 并打入包内

## 5. 可选快速命令

```bash
# 在 AutoSnippet 目录
npm run test:unit
npm run build:dashboard
# 仅当想自测完整性校验时再跑（发布时 prepublishOnly 会自动生成 checksums）
# npm run generate-checksums && npm run verify-checksums
```

完成以上检查后即可提交并打 tag / 发布新版本。
