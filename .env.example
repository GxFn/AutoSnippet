# AutoSnippet 环境变量配置文件示例
#
# 使用方式：
#   1. 将本文件复制到「项目根目录」（即 AutoSnippetRoot.boxspec.json 所在目录）
#   2. 重命名为 .env（注意没有 .example 后缀）
#   3. 根据下方说明填写 API Key 等配置
# 可从本仓库下载： https://github.com/GxFn/AutoSnippet/blob/main/.env.example
#
# 配置生效范围：asd ui、asd create、asd ais、asd watch 的 Guard、asd embed、asd search -m 等
# 会优先读取项目根目录下的 .env；未配置 API Key 时，上述依赖 AI 的功能会报错或提示。
#
# =============================================================================
# --- 1. AI 提供商配置 ---
# =============================================================================
# 必填其一：根据所选提供商填写对应的 API Key；Ollama 本地 AI 通常不需要 Key。

# 当前使用的 AI 提供商
# 可选值: google, openai, deepseek, claude, ollama, mock
#   google   - Google Gemini，需填写 ASD_GOOGLE_API_KEY
#   openai  - OpenAI（含兼容接口），需填写 ASD_OPENAI_API_KEY
#   deepseek - DeepSeek，需填写 ASD_DEEPSEEK_API_KEY
#   claude  - Anthropic Claude，需填写 ASD_CLAUDE_API_KEY
#   ollama  - 本地 Ollama，默认 http://localhost:11434/v1，一般不需 Key
#   mock    - 模拟模式，用于测试，无真实请求
ASD_AI_PROVIDER=google

# 模型名称，根据上面 ASD_AI_PROVIDER 选择对应厂商的模型 ID
# 常用示例：
#   google:  gemini-2.0-flash, gemini-1.5-pro, gemini-1.5-flash
#   openai:  gpt-4o, gpt-4-turbo, gpt-4o-mini
#   deepseek: deepseek-chat, deepseek-coder
#   claude:  claude-3-5-sonnet-20240620, claude-3-opus-20240229
#   ollama:  填写本机已安装的模型名，如 llama3, qwen2, mistral
ASD_AI_MODEL=gemini-2.0-flash

# 各提供商的 API Key（只填当前使用的提供商即可，其余可留空）
ASD_GOOGLE_API_KEY=
ASD_OPENAI_API_KEY=
ASD_DEEPSEEK_API_KEY=
ASD_CLAUDE_API_KEY=

# 自定义 API 地址（可选）
# 适用于：自建代理、国内镜像、或 Ollama 等本地服务不在默认端口时
# 未设置时使用各厂商官方默认地址
# ASD_OPENAI_BASE_URL=https://api.openai.com/v1
# ASD_DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
# ASD_CLAUDE_BASE_URL=https://api.anthropic.com/v1
# ASD_OLLAMA_BASE_URL=http://127.0.0.1:11434/v1

# =============================================================================
# --- 2. Dashboard 与构建配置 ---
# =============================================================================

# 是否在启动 asd ui 时强制重新构建前端（0=否，1=是）
# 设为 1 时，每次 asd ui 都会先执行 npm run build:dashboard，适合本地改完 dashboard 代码后预览
# 正常使用保持 0 即可
ASD_UI_BUILD=0
ASD_UI_REBUILD=0

# =============================================================================
# --- 3. 监听与文件系统配置 ---
# =============================================================================

# 是否使用轮询方式监听文件变化（true / false）
# 默认 false 使用系统原生 watch；若项目在 NFS、网络盘或部分虚拟机上监听不生效，可改为 true
ASD_WATCH_POLLING=false

# Xcode Code Snippets 的存储路径（留空则使用默认）
# 默认: ~/Library/Developer/Xcode/UserData/CodeSnippets
# asd install 会把 Snippet 同步到此目录，Xcode 从这里加载
ASD_SNIPPETS_PATH=

# AutoSnippet 缓存目录（留空则使用默认）
# 用于缓存索引、临时数据等，一般无需修改
ASD_CACHE_PATH=

# 当工具发现「当前 Target 缺少对某模块的依赖」时，是否自动在 Package.swift 里插入依赖
# 典型场景：头文件注入（as:include）时，若当前 Target 的 dependencies 里没有对应模块，可自动补上
# 插入内容包含：同包内 .target 依赖、跨包 .product 依赖、以及 Package 级的 .package(path/url)
#
# ASD_FIX_SPM_DEPS：设为 1 或 true 时，启用自动插入（等价于 MODE=fix）
# ASD_FIX_SPM_DEPS_MODE：更细粒度控制，可选：
#   off    - 不自动改 Package.swift，仅给出修改建议（默认）
#   suggest - 同上，仅建议
#   fix    - 自动在 Package.swift 中插入缺失的 target/product/package 依赖
# 日常使用建议保持 off；确认需要自动补依赖时再改为 fix
ASD_FIX_SPM_DEPS=false
ASD_FIX_SPM_DEPS_MODE=

# Package.swift 解析：npm install 时会尝试构建 ParsePackage（swift-syntax）；成功则默认用它，失败则用 dump-package，再失败用 AST-lite
# ASD_USE_DUMP_PACKAGE=1（默认）- ParsePackage 不可用时用系统 dump-package；=0 则跳过 dump-package，仅 AST-lite
# ASD_SWIFT_PARSER_BIN - 指定 ParsePackage 可执行文件路径；未设置时使用 npm install 构建的 tools/parse-package/.build/release/ParsePackage
# ASD_SWIFT_PARSER_DISABLE=1 - 强制禁用 ParsePackage，仅用 dump-package 或 AST-lite
# ASD_SWIFT_PARSER_TIMEOUT_MS - 解析超时毫秒数，默认 5000
# ASD_USE_DUMP_PACKAGE=1
# ASD_SWIFT_PARSER_BIN=
# ASD_SWIFT_PARSER_DISABLE=
# ASD_SWIFT_PARSER_TIMEOUT_MS=5000

# =============================================================================
# --- 4. 开发与测试配置 ---
# =============================================================================
# 以下多为自动化测试或脚本调用时使用，日常使用可忽略。

# 预置输入 JSON 路径，用于非交互式 create 等（自动化/CI）
ASD_PRESET=
ASD_TEST_PRESET=

# 测试运行器使用的「模拟项目根目录」，默认指向 ../AutoSnippetTestHome/BiliDiliForTest
ASD_TEST_HOME=

# AI 提取时指定的源码文件路径（脚本/自动化用）
ASD_ACODE_FILE=

# 增量测试时传入的变更文件列表，供 test/runner.js --changed 使用
ASD_TEST_CHANGED_FILES=

# =============================================================================
# --- 5. 网络代理（可选） ---
# =============================================================================
# 访问 Google / OpenAI 等 API 时走代理时设置；仅在有代理需求时取消注释并修改地址。

# https_proxy=http://127.0.0.1:7890
# http_proxy=http://127.0.0.1:7890
